var quform=function(o,r,t,e){"use strict";var a,n=o.core,i=n.cache,f=r(document),c=!1;return r((a={init:function(){i.get("#qfb-export-form-button").click(a["export"]),i.get("#qfb-export-form-data").click(function(){i.get("#qfb-export-form-data").focus().select()}),f.on("heartbeat-tick",function(o,r){r&&r.nonces_expired&&r.quformExportFormNonce&&t.exportFormNonce!==r.quformExportFormNonce&&(t.exportFormNonce=r.quformExportFormNonce)})},validate:function(){if(i.get(".qfb-tools-export-form").find(".qfb-validation-error").remove(),""!==i.get("#qfb-export-form").val())return!0;var o=i.get("#qfb-export-form").closest(n.settingWrap);return n.addValidationError(o,t.noFormSelected),n.scrollTo(o),!1},"export":function(){if(!c){if(i.get("#qfb-export-form-data").val(""),i.get("#qfb-export-form-data-wrap").hide(),!a.validate())return!1;c=!0,i.get("#qfb-export-form-loading").show().animate({maxWidth:"43px"}),r.ajax({type:"POST",url:e.ajaxUrl,data:{action:"quform_export_form",_ajax_nonce:t.exportFormNonce,id:i.get("#qfb-export-form").val()},dataType:"json"}).done(function(o){"success"==(o=n.sanitizeResponse(o)).type?a.onExportSuccess(o.data):"error"!=o.type&&"invalid"!=o.type||a.onExportFail(o)}).fail(function(){a.onExportFail({message:e.ajaxError})}).always(function(){c=!1,i.get("#qfb-export-form-loading").css({maxWidth:0}).hide()})}},onExportSuccess:function(o){i.get("#qfb-export-form-data").val(o),i.get("#qfb-export-form-data-wrap").slideDown()},onExportFail:function(o){var e;n.isNonEmptyString(o.message)&&n.showFixedMessage(t.errorExportingForm+"<br>"+o.message,"error"),o.errors&&r.each(o.errors,function(o,r){var t=i.get("#"+o).closest(n.settingWrap);e=e||t,n.addValidationError(t,r)}),e&&n.scrollTo(e)}}).init),o.tools=o.tools||{},o.tools.exportForm=a,o}(quform,jQuery,quformToolsExportFormL10n,quformCoreL10n);